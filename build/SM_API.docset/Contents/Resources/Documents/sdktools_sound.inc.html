<!DOCTYPE html>
<title>sdktools_sound.inc</title>
<link rel="stylesheet" href="style.css"/>
<pre><a name="1"></a><span class="comment">/**
<a name="2"></a> * vim: set ts=4 :
<a name="3"></a> * =============================================================================
<a name="4"></a> * SourceMod (C)2004-2008 AlliedModders LLC.  All rights reserved.
<a name="5"></a> * =============================================================================
<a name="6"></a> *
<a name="7"></a> * This file is part of the SourceMod/SourcePawn SDK.
<a name="8"></a> *
<a name="9"></a> * This program is free software; you can redistribute it and/or modify it under
<a name="10"></a> * the terms of the GNU General Public License, version 3.0, as published by the
<a name="11"></a> * Free Software Foundation.
<a name="12"></a> * 
<a name="13"></a> * This program is distributed in the hope that it will be useful, but WITHOUT
<a name="14"></a> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
<a name="15"></a> * FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
<a name="16"></a> * details.
<a name="17"></a> *
<a name="18"></a> * You should have received a copy of the GNU General Public License along with
<a name="19"></a> * this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
<a name="20"></a> *
<a name="21"></a> * As a special exception, AlliedModders LLC gives you permission to link the
<a name="22"></a> * code of this program (as well as its derivative works) to "Half-Life 2," the
<a name="23"></a> * "Source Engine," the "SourcePawn JIT," and any Game MODs that run on software
<a name="24"></a> * by the Valve Corporation.  You must obey the GNU General Public License in
<a name="25"></a> * all respects for all other code used.  Additionally, AlliedModders LLC grants
<a name="26"></a> * this exception to all derivative works.  AlliedModders LLC defines further
<a name="27"></a> * exceptions, found in LICENSE.txt (as of this writing, version JULY-31-2007),
<a name="28"></a> * or &lt;http://www.sourcemod.net/license.php&gt;.
<a name="29"></a> *
<a name="30"></a> * Version: $Id$
<a name="31"></a> */</span>
<a name="32"></a>
<a name="33"></a><span class="preprocessor">#if <span class="identifier">defined</span> <span class="identifier">_sdktools_sound_included</span>
<a name="34"></a></span>  <span class="preprocessor">#endinput
<a name="35"></a></span><span class="preprocessor">#endif
<a name="36"></a></span><span class="preprocessor">#define <span class="identifier">_sdktools_sound_included</span>
<a name="37"></a></span>
<a name="38"></a><span class="comment">/**
<a name="39"></a> * Sound should be from the target client.
<a name="40"></a> */</span>
<a name="41"></a><span class="preprocessor">#define <span class="identifier">SOUND_FROM_PLAYER</span>		-<span class="number">2</span>
<a name="42"></a></span>
<a name="43"></a><span class="comment">/**
<a name="44"></a> * Sound should be from the listen server player.
<a name="45"></a> */</span>
<a name="46"></a><span class="preprocessor">#define <span class="identifier">SOUND_FROM_LOCAL_PLAYER</span>	-<span class="number">1</span>
<a name="47"></a></span>
<a name="48"></a><span class="comment">/**
<a name="49"></a> * Sound is from the world.
<a name="50"></a> */</span>
<a name="51"></a><span class="preprocessor">#define <span class="identifier">SOUND_FROM_WORLD</span>		<span class="number">0</span>
<a name="52"></a></span>
<a name="53"></a><span class="comment">/**
<a name="54"></a> * Sound channels.
<a name="55"></a> */</span>
<a name="56"></a><span class="keyword">enum</span>
<a name="57"></a>{
<a name="58"></a>	<span class="identifier">SNDCHAN_REPLACE</span> = -<span class="number">1</span>,		<span class="comment">/**&lt; Unknown */</span>
<a name="59"></a>	<span class="identifier">SNDCHAN_AUTO</span> = <span class="number">0</span>,			<span class="comment">/**&lt; Auto */</span>
<a name="60"></a>	<span class="identifier">SNDCHAN_WEAPON</span> = <span class="number">1</span>,			<span class="comment">/**&lt; Weapons */</span>
<a name="61"></a>	<span class="identifier">SNDCHAN_VOICE</span> = <span class="number">2</span>,			<span class="comment">/**&lt; Voices */</span>
<a name="62"></a>	<span class="identifier">SNDCHAN_ITEM</span> = <span class="number">3</span>,			<span class="comment">/**&lt; Items */</span>
<a name="63"></a>	<span class="identifier">SNDCHAN_BODY</span> = <span class="number">4</span>,			<span class="comment">/**&lt; Player? */</span>
<a name="64"></a>	<span class="identifier">SNDCHAN_STREAM</span> = <span class="number">5</span>,			<span class="comment">/**&lt; "Stream channel from the static or dynamic area" */</span>
<a name="65"></a>	<span class="identifier">SNDCHAN_STATIC</span> = <span class="number">6</span>,			<span class="comment">/**&lt; "Stream channel from the static area" */</span>
<a name="66"></a>	<span class="identifier">SNDCHAN_VOICE_BASE</span> = <span class="number">7</span>,		<span class="comment">/**&lt; "Channel for network voice data" */</span>
<a name="67"></a>	<span class="identifier">SNDCHAN_USER_BASE</span> = <span class="number">135</span>		<span class="comment">/**&lt; Anything &gt;= this is allocated to game code */</span>
<a name="68"></a>};
<a name="69"></a>
<a name="70"></a><span class="comment">/**
<a name="71"></a> * Sound flags for the sound emitter system.
<a name="72"></a> */</span>
<a name="73"></a><span class="keyword">enum</span>
<a name="74"></a>{
<a name="75"></a>	<span class="identifier">SND_NOFLAGS</span>= <span class="number">0</span>,			<span class="comment">/**&lt; Nothing */</span>
<a name="76"></a>	<span class="identifier">SND_CHANGEVOL</span> = <span class="number">1</span>,		<span class="comment">/**&lt; Change sound volume */</span>
<a name="77"></a>	<span class="identifier">SND_CHANGEPITCH</span> = <span class="number">2</span>,	<span class="comment">/**&lt; Change sound pitch */</span>
<a name="78"></a>	<span class="identifier">SND_STOP</span> = <span class="number">3</span>,			<span class="comment">/**&lt; Stop the sound */</span>
<a name="79"></a>	<span class="identifier">SND_SPAWNING</span> = <span class="number">4</span>,		<span class="comment">/**&lt; Used in some cases for ambients */</span>
<a name="80"></a>	<span class="identifier">SND_DELAY</span> = <span class="number">5</span>,			<span class="comment">/**&lt; Sound has an initial delay */</span>
<a name="81"></a>	<span class="identifier">SND_STOPLOOPING</span> = <span class="number">6</span>,	<span class="comment">/**&lt; Stop looping all sounds on the entity */</span>
<a name="82"></a>	<span class="identifier">SND_SPEAKER</span> = <span class="number">7</span>,		<span class="comment">/**&lt; Being played by a mic through a speaker */</span>
<a name="83"></a>	<span class="identifier">SND_SHOULDPAUSE</span> = <span class="number">8</span>,	<span class="comment">/**&lt; Pause if game is paused */</span>
<a name="84"></a>};
<a name="85"></a>
<a name="86"></a><span class="comment">/**
<a name="87"></a> * Various predefined sound levels in dB.
<a name="88"></a> */</span>
<a name="89"></a><span class="keyword">enum</span>
<a name="90"></a>{
<a name="91"></a>	<span class="identifier">SNDLEVEL_NONE</span> = <span class="number">0</span>,			<span class="comment">/**&lt; None */</span>
<a name="92"></a>	<span class="identifier">SNDLEVEL_RUSTLE</span> = <span class="number">20</span>,		<span class="comment">/**&lt; Rustling leaves */</span>
<a name="93"></a>	<span class="identifier">SNDLEVEL_WHISPER</span> = <span class="number">25</span>,		<span class="comment">/**&lt; Whispering */</span>
<a name="94"></a>	<span class="identifier">SNDLEVEL_LIBRARY</span> = <span class="number">30</span>,		<span class="comment">/**&lt; In a library */</span>
<a name="95"></a>	<span class="identifier">SNDLEVEL_FRIDGE</span> = <span class="number">45</span>,		<span class="comment">/**&lt; Refridgerator */</span>
<a name="96"></a>	<span class="identifier">SNDLEVEL_HOME</span> = <span class="number">50</span>,			<span class="comment">/**&lt; Average home (3.9 attn) */</span>
<a name="97"></a>	<span class="identifier">SNDLEVEL_CONVO</span> = <span class="number">60</span>,		<span class="comment">/**&lt; Normal conversation (2.0 attn) */</span>
<a name="98"></a>	<span class="identifier">SNDLEVEL_DRYER</span> = <span class="number">60</span>,		<span class="comment">/**&lt; Clothes dryer */</span>
<a name="99"></a>	<span class="identifier">SNDLEVEL_DISHWASHER</span> = <span class="number">65</span>,	<span class="comment">/**&lt; Dishwasher/washing machine (1.5 attn) */</span>
<a name="100"></a>	<span class="identifier">SNDLEVEL_CAR</span> = <span class="number">70</span>,			<span class="comment">/**&lt; Car or vacuum cleaner (1.0 attn) */</span>
<a name="101"></a>	<span class="identifier">SNDLEVEL_NORMAL</span> = <span class="number">75</span>,		<span class="comment">/**&lt; Normal sound level */</span>
<a name="102"></a>	<span class="identifier">SNDLEVEL_TRAFFIC</span> = <span class="number">75</span>,		<span class="comment">/**&lt; Busy traffic (0.8 attn) */</span>
<a name="103"></a>	<span class="identifier">SNDLEVEL_MINIBIKE</span> = <span class="number">80</span>,		<span class="comment">/**&lt; Mini-bike, alarm clock (0.7 attn) */</span>
<a name="104"></a>	<span class="identifier">SNDLEVEL_SCREAMING</span> = <span class="number">90</span>,	<span class="comment">/**&lt; Screaming child (0.5 attn) */</span>
<a name="105"></a>	<span class="identifier">SNDLEVEL_TRAIN</span> = <span class="number">100</span>,		<span class="comment">/**&lt; Subway train, pneumatic drill (0.4 attn) */</span>
<a name="106"></a>	<span class="identifier">SNDLEVEL_HELICOPTER</span> = <span class="number">105</span>,	<span class="comment">/**&lt; Helicopter */</span>
<a name="107"></a>	<span class="identifier">SNDLEVEL_SNOWMOBILE</span> = <span class="number">110</span>,	<span class="comment">/**&lt; Snow mobile */</span>
<a name="108"></a>	<span class="identifier">SNDLEVEL_AIRCRAFT</span> = <span class="number">120</span>,	<span class="comment">/**&lt; Auto horn, aircraft */</span>
<a name="109"></a>	<span class="identifier">SNDLEVEL_RAIDSIREN</span> = <span class="number">130</span>,	<span class="comment">/**&lt; Air raid siren */</span>
<a name="110"></a>	<span class="identifier">SNDLEVEL_GUNFIRE</span> = <span class="number">140</span>,		<span class="comment">/**&lt; Gunshot, jet engine (0.27 attn) */</span>
<a name="111"></a>	<span class="identifier">SNDLEVEL_ROCKET</span> = <span class="number">180</span>,		<span class="comment">/**&lt; Rocket launching (0.2 attn) */</span>
<a name="112"></a>};
<a name="113"></a>
<a name="114"></a><span class="preprocessor">#define <span class="identifier">SNDVOL_NORMAL</span>		<span class="number">1.0</span>		<span class="comment">/**&lt; Normal volume */</span>
<a name="115"></a></span><span class="preprocessor">#define <span class="identifier">SNDPITCH_NORMAL</span>		<span class="number">100</span>		<span class="comment">/**&lt; Normal pitch */</span>
<a name="116"></a></span><span class="preprocessor">#define <span class="identifier">SNDPITCH_LOW</span>		<span class="number">95</span>		<span class="comment">/**&lt; A low pitch */</span>
<a name="117"></a></span><span class="preprocessor">#define <span class="identifier">SNDPITCH_HIGH</span>		<span class="number">120</span>		<span class="comment">/**&lt; A high pitch */</span>
<a name="118"></a></span><span class="preprocessor">#define <span class="identifier">SNDATTN_NONE</span>		<span class="number">0.0</span>		<span class="comment">/**&lt; No attenuation */</span>
<a name="119"></a></span><span class="preprocessor">#define <span class="identifier">SNDATTN_NORMAL</span>		<span class="number">0.8</span>		<span class="comment">/**&lt; Normal attenuation */</span>
<a name="120"></a></span><span class="preprocessor">#define <span class="identifier">SNDATTN_STATIC</span>		<span class="number">1.25</span>	<span class="comment">/**&lt; Static attenuation? */</span>
<a name="121"></a></span><span class="preprocessor">#define <span class="identifier">SNDATTN_RICOCHET</span>	<span class="number">1.5</span>		<span class="comment">/**&lt; Ricochet effect */</span>
<a name="122"></a></span><span class="preprocessor">#define <span class="identifier">SNDATTN_IDLE</span>		<span class="number">2.0</span>		<span class="comment">/**&lt; Idle attenuation? */</span>
<a name="123"></a></span> 
<a name="124"></a><span class="comment">/**
<a name="125"></a> * Prefetches a sound.
<a name="126"></a> *
<a name="127"></a> * <span class="doctag">@param</span> name		Sound file name relative to the "sounds" folder.
<a name="128"></a> * <span class="doctag">@noreturn</span>
<a name="129"></a> */</span>
<a name="130"></a><span class="keyword">native</span> <span class="identifier">PrefetchSound</span>(<span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">name</span>[]);
<a name="131"></a>
<a name="132"></a><span class="comment">/**
<a name="133"></a> * This function is not known to work, and may crash.  You should 
<a name="134"></a> * not use it.  It is provided for backwards compatibility only.
<a name="135"></a> *
<a name="136"></a> * <span class="doctag">@param</span> name		Sound file name relative to the "sounds" folder.
<a name="137"></a> * <span class="doctag">@return</span>			Duration in seconds.
<a name="138"></a> */</span>
<a name="139"></a><span class="preprocessor">#pragma <span class="identifier">deprecated</span> <span class="identifier">Does</span> <span class="identifier">not</span> <span class="identifier">work</span>, <span class="identifier">may</span> <span class="identifier">crash</span>.
<a name="140"></a></span><span class="keyword">native</span> <span class="keyword type">Float</span>:<span class="identifier">GetSoundDuration</span>(<span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">name</span>[]);
<a name="141"></a>
<a name="142"></a><span class="comment">/**
<a name="143"></a> * Emits an ambient sound.
<a name="144"></a> *
<a name="145"></a> * <span class="doctag">@param</span> name		Sound file name relative to the "sounds" folder.
<a name="146"></a> * <span class="doctag">@param</span> pos		Origin of sound.
<a name="147"></a> * <span class="doctag">@param</span> entity	Entity index to associate sound with.
<a name="148"></a> * <span class="doctag">@param</span> level		Sound level (from 0 to 255).
<a name="149"></a> * <span class="doctag">@param</span> flags		Sound flags.
<a name="150"></a> * <span class="doctag">@param</span> vol		Volume (from 0.0 to 1.0).
<a name="151"></a> * <span class="doctag">@param</span> pitch		Pitch (from 0 to 255).
<a name="152"></a> * <span class="doctag">@param</span> delay		Play delay.
<a name="153"></a> * <span class="doctag">@noreturn</span>
<a name="154"></a> */</span>
<a name="155"></a><span class="keyword">native</span> <span class="identifier">EmitAmbientSound</span>(<span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">name</span>[],
<a name="156"></a>						<span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">pos</span>[<span class="number">3</span>],
<a name="157"></a>						<span class="identifier">entity</span> = <span class="identifier">SOUND_FROM_WORLD</span>,
<a name="158"></a>						<span class="identifier">level</span> = <span class="identifier">SNDLEVEL_NORMAL</span>,
<a name="159"></a>						<span class="identifier">flags</span> = <span class="identifier">SND_NOFLAGS</span>,
<a name="160"></a>						<span class="keyword type">Float</span>:<span class="identifier">vol</span> = <span class="identifier">SNDVOL_NORMAL</span>,
<a name="161"></a>						<span class="identifier">pitch</span> = <span class="identifier">SNDPITCH_NORMAL</span>,
<a name="162"></a>						<span class="keyword type">Float</span>:<span class="identifier">delay</span> = <span class="number">0.0</span>);
<a name="163"></a>
<a name="164"></a><span class="comment">/**
<a name="165"></a> * Fades a client's volume level toward silence or a given percentage.
<a name="166"></a> *
<a name="167"></a> * <span class="doctag">@param</span> client	Client index.
<a name="168"></a> * <span class="doctag">@param</span> percent	Fade percentage.
<a name="169"></a> * <span class="doctag">@param</span> outtime	Fade out time, in seconds.
<a name="170"></a> * <span class="doctag">@param</span> holdtime	Hold time, in seconds.
<a name="171"></a> * <span class="doctag">@param</span> intime	Fade in time, in seconds.
<a name="172"></a> * <span class="doctag">@noreturn</span>
<a name="173"></a> * <span class="doctag">@error</span>			Invalid client index or client not in game.
<a name="174"></a> */</span>
<a name="175"></a><span class="keyword">native</span> <span class="identifier">FadeClientVolume</span>(<span class="identifier">client</span>, <span class="keyword type">Float</span>:<span class="identifier">percent</span>, <span class="keyword type">Float</span>:<span class="identifier">outtime</span>, <span class="keyword type">Float</span>:<span class="identifier">holdtime</span>, <span class="keyword type">Float</span>:<span class="identifier">intime</span>);
<a name="176"></a>
<a name="177"></a><span class="comment">/**
<a name="178"></a> * Stops a sound.
<a name="179"></a> *
<a name="180"></a> * <span class="doctag">@param</span> entity	Entity index.
<a name="181"></a> * <span class="doctag">@param</span> channel	Channel number.
<a name="182"></a> * <span class="doctag">@param</span> name		Sound file name relative to the "sounds" folder.
<a name="183"></a> * <span class="doctag">@noreturn</span>
<a name="184"></a> */</span>
<a name="185"></a><span class="keyword">native</span> <span class="identifier">StopSound</span>(<span class="identifier">entity</span>, <span class="identifier">channel</span>, <span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">name</span>[]);
<a name="186"></a>
<a name="187"></a><span class="comment">/**
<a name="188"></a> * Emits a sound to a list of clients.
<a name="189"></a> *
<a name="190"></a> * <span class="doctag">@param</span> clients		Array of client indexes.
<a name="191"></a> * <span class="doctag">@param</span> numClients	Number of clients in the array.
<a name="192"></a> * <span class="doctag">@param</span> sample		Sound file name relative to the "sounds" folder.
<a name="193"></a> * <span class="doctag">@param</span> entity		Entity to emit from.
<a name="194"></a> * <span class="doctag">@param</span> channel		Channel to emit with.
<a name="195"></a> * <span class="doctag">@param</span> level			Sound level.
<a name="196"></a> * <span class="doctag">@param</span> flags			Sound flags.
<a name="197"></a> * <span class="doctag">@param</span> volume		Sound volume.
<a name="198"></a> * <span class="doctag">@param</span> pitch			Sound pitch.
<a name="199"></a> * <span class="doctag">@param</span> speakerentity	Unknown.
<a name="200"></a> * <span class="doctag">@param</span> origin		Sound origin.
<a name="201"></a> * <span class="doctag">@param</span> dir			Sound direction.
<a name="202"></a> * <span class="doctag">@param</span> updatePos		Unknown (updates positions?)
<a name="203"></a> * <span class="doctag">@param</span> soundtime		Alternate time to play sound for.
<a name="204"></a> * <span class="doctag">@param</span> ...			Optional list of Float[3] arrays to specify additional origins.
<a name="205"></a> * <span class="doctag">@noreturn</span>
<a name="206"></a> * <span class="doctag">@error</span>				Invalid client index.
<a name="207"></a> */</span>
<a name="208"></a><span class="keyword">native</span> <span class="identifier">EmitSound</span>(<span class="keyword">const</span> <span class="identifier">clients</span>[],
<a name="209"></a>				 <span class="identifier">numClients</span>,
<a name="210"></a>				 <span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">sample</span>[],
<a name="211"></a>				 <span class="identifier">entity</span> = <span class="identifier">SOUND_FROM_PLAYER</span>,
<a name="212"></a>				 <span class="identifier">channel</span> = <span class="identifier">SNDCHAN_AUTO</span>,
<a name="213"></a>				 <span class="identifier">level</span> = <span class="identifier">SNDLEVEL_NORMAL</span>,
<a name="214"></a>				 <span class="identifier">flags</span> = <span class="identifier">SND_NOFLAGS</span>,
<a name="215"></a>				 <span class="keyword type">Float</span>:<span class="identifier">volume</span> = <span class="identifier">SNDVOL_NORMAL</span>,
<a name="216"></a>				 <span class="identifier">pitch</span> = <span class="identifier">SNDPITCH_NORMAL</span>,
<a name="217"></a>				 <span class="identifier">speakerentity</span> = -<span class="number">1</span>,
<a name="218"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">origin</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="219"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">dir</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="220"></a>				 <span class="keyword type">bool</span>:<span class="identifier">updatePos</span> = <span class="keyword literal">true</span>,
<a name="221"></a>				 <span class="keyword type">Float</span>:<span class="identifier">soundtime</span> = <span class="number">0.0</span>,
<a name="222"></a>				 <span class="keyword type">any</span>:...);
<a name="223"></a>
<a name="224"></a><span class="comment">/**
<a name="225"></a> * Emits a sentence to a list of clients.
<a name="226"></a> *
<a name="227"></a> * <span class="doctag">@param</span> clients		Array of client indexes.
<a name="228"></a> * <span class="doctag">@param</span> numClients	Number of clients in the array.
<a name="229"></a> * <span class="doctag">@param</span> sentence		Sentence index (from PrecacheSenteFile).
<a name="230"></a> * <span class="doctag">@param</span> entity		Entity to emit from.
<a name="231"></a> * <span class="doctag">@param</span> channel		Channel to emit with.
<a name="232"></a> * <span class="doctag">@param</span> level			Sound level.
<a name="233"></a> * <span class="doctag">@param</span> flags			Sound flags.
<a name="234"></a> * <span class="doctag">@param</span> volume		Sound volume.
<a name="235"></a> * <span class="doctag">@param</span> pitch			Sound pitch.
<a name="236"></a> * <span class="doctag">@param</span> speakerentity	Unknown.
<a name="237"></a> * <span class="doctag">@param</span> origin		Sound origin.
<a name="238"></a> * <span class="doctag">@param</span> dir			Sound direction.
<a name="239"></a> * <span class="doctag">@param</span> updatePos		Unknown (updates positions?)
<a name="240"></a> * <span class="doctag">@param</span> soundtime		Alternate time to play sound for.
<a name="241"></a> * <span class="doctag">@param</span> ...			Optional list of Float[3] arrays to specify additional origins.
<a name="242"></a> * <span class="doctag">@noreturn</span>
<a name="243"></a> * <span class="doctag">@error</span>				Invalid client index.
<a name="244"></a> */</span>
<a name="245"></a><span class="keyword">native</span> <span class="identifier">EmitSentence</span>(<span class="keyword">const</span> <span class="identifier">clients</span>[],
<a name="246"></a>				 <span class="identifier">numClients</span>,
<a name="247"></a>				 <span class="identifier">sentence</span>,
<a name="248"></a>				 <span class="identifier">entity</span>,
<a name="249"></a>				 <span class="identifier">channel</span> = <span class="identifier">SNDCHAN_AUTO</span>,
<a name="250"></a>				 <span class="identifier">level</span> = <span class="identifier">SNDLEVEL_NORMAL</span>,
<a name="251"></a>				 <span class="identifier">flags</span> = <span class="identifier">SND_NOFLAGS</span>,
<a name="252"></a>				 <span class="keyword type">Float</span>:<span class="identifier">volume</span> = <span class="identifier">SNDVOL_NORMAL</span>,
<a name="253"></a>				 <span class="identifier">pitch</span> = <span class="identifier">SNDPITCH_NORMAL</span>,
<a name="254"></a>				 <span class="identifier">speakerentity</span> = -<span class="number">1</span>,
<a name="255"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">origin</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="256"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">dir</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="257"></a>				 <span class="keyword type">bool</span>:<span class="identifier">updatePos</span> = <span class="keyword literal">true</span>,
<a name="258"></a>				 <span class="keyword type">Float</span>:<span class="identifier">soundtime</span> = <span class="number">0.0</span>,
<a name="259"></a>				 <span class="keyword type">any</span>:...);
<a name="260"></a>				 
<a name="261"></a><span class="comment">/**
<a name="262"></a> *Calculates gain of sound on given distance with given sound level in decibel
<a name="263"></a> *
<a name="264"></a> * <span class="doctag">@param</span> soundlevel	decibel of sound, like SNDLEVEL_NORMAL or integer value
<a name="265"></a> * <span class="doctag">@param</span> distance	distance of sound to calculate, not meter or feet, but Source Engine`s normal Coordinate unit
<a name="266"></a> * <span class="doctag">@return</span>			gain of sound. you can multiply this with original sound`s volume to calculate volume on given distance
<a name="267"></a> */</span>
<a name="268"></a><span class="keyword">native</span> <span class="keyword type">Float</span>:<span class="identifier">GetDistGainFromSoundLevel</span>(<span class="identifier">soundlevel</span>, <span class="keyword type">Float</span>:<span class="identifier">distance</span>);
<a name="269"></a>
<a name="270"></a><span class="comment">/**
<a name="271"></a> * Called when an ambient sound is about to be emitted to one or more clients.
<a name="272"></a> *
<a name="273"></a> * NOTICE: all parameters can be overwritten to modify the default behavior.
<a name="274"></a> *
<a name="275"></a> * <span class="doctag">@param</span> sample	Sound file name relative to the "sounds" folder.
<a name="276"></a> * <span class="doctag">@param</span> entity	Entity index associated to the sound.
<a name="277"></a> * <span class="doctag">@param</span> volume	Volume (from 0.0 to 1.0).
<a name="278"></a> * <span class="doctag">@param</span> level		Sound level (from 0 to 255).
<a name="279"></a> * <span class="doctag">@param</span> pitch		Pitch (from 0 to 255).
<a name="280"></a> * <span class="doctag">@param</span> pos		Origin of sound.
<a name="281"></a> * <span class="doctag">@param</span> flags		Sound flags.
<a name="282"></a> * <span class="doctag">@param</span> delay		Play delay.
<a name="283"></a> * <span class="doctag">@return</span>		Plugin_Continue to allow the sound to be played, Plugin_Stop to block it, 
<a name="284"></a> *			  Plugin_Changed when any parameter has been modified.
<a name="285"></a> */</span>
<a name="286"></a><span class="identifier">functag</span> <span class="keyword">public</span> <span class="identifier">Action</span>:<span class="identifier">AmbientSHook</span>(<span class="keyword type">String</span>:<span class="identifier">sample</span>[<span class="identifier">PLATFORM_MAX_PATH</span>], &amp;<span class="identifier">entity</span>, &amp;<span class="keyword type">Float</span>:<span class="identifier">volume</span>, &amp;<span class="identifier">level</span>, &amp;<span class="identifier">pitch</span>, <span class="keyword type">Float</span>:<span class="identifier">pos</span>[<span class="number">3</span>], &amp;<span class="identifier">flags</span>, &amp;<span class="keyword type">Float</span>:<span class="identifier">delay</span>);
<a name="287"></a>
<a name="288"></a><span class="comment">/**
<a name="289"></a> * Called when a sound is going to be emitted to one or more clients.
<a name="290"></a> * NOTICE: all params can be overwritten to modify the default behaviour.
<a name="291"></a> *
<a name="292"></a> * <span class="doctag">@param</span> clients		Array of client indexes.
<a name="293"></a> * <span class="doctag">@param</span> numClients		Number of clients in the array (modify this value if you add/remove elements from the client array).
<a name="294"></a> * <span class="doctag">@param</span> sample		Sound file name relative to the "sounds" folder.
<a name="295"></a> * <span class="doctag">@param</span> entity		Entity emitting the sound.
<a name="296"></a> * <span class="doctag">@param</span> channel		Channel emitting the sound.
<a name="297"></a> * <span class="doctag">@param</span> volume		Sound volume.
<a name="298"></a> * <span class="doctag">@param</span> level			Sound level.
<a name="299"></a> * <span class="doctag">@param</span> pitch			Sound pitch.
<a name="300"></a> * <span class="doctag">@param</span> flags			Sound flags.
<a name="301"></a> * <span class="doctag">@return</span>			Plugin_Continue to allow the sound to be played, Plugin_Stop to block it, 
<a name="302"></a> *				  Plugin_Changed when any parameter has been modified.
<a name="303"></a> */</span>
<a name="304"></a><span class="identifier">functag</span> <span class="keyword">public</span> <span class="identifier">Action</span>:<span class="identifier">NormalSHook</span>(<span class="identifier">clients</span>[<span class="number">64</span>], &amp;<span class="identifier">numClients</span>, <span class="keyword type">String</span>:<span class="identifier">sample</span>[<span class="identifier">PLATFORM_MAX_PATH</span>], &amp;<span class="identifier">entity</span>, &amp;<span class="identifier">channel</span>, &amp;<span class="keyword type">Float</span>:<span class="identifier">volume</span>, &amp;<span class="identifier">level</span>, &amp;<span class="identifier">pitch</span>, &amp;<span class="identifier">flags</span>);
<a name="305"></a>
<a name="306"></a><span class="comment">/**
<a name="307"></a> * Hooks all played ambient sounds.
<a name="308"></a> *
<a name="309"></a> * <span class="doctag">@param</span> hook		Function to use as a hook.
<a name="310"></a> * <span class="doctag">@noreturn</span>
<a name="311"></a> * <span class="doctag">@error</span>		Invalid function hook.
<a name="312"></a> */</span>
<a name="313"></a><span class="keyword">native</span> <span class="identifier">AddAmbientSoundHook</span>(<span class="identifier">AmbientSHook</span>:<span class="identifier">hook</span>);
<a name="314"></a>
<a name="315"></a><span class="comment">/**
<a name="316"></a> * Hooks all played normal sounds.
<a name="317"></a> *
<a name="318"></a> * <span class="doctag">@param</span> hook		Function to use as a hook.
<a name="319"></a> * <span class="doctag">@noreturn</span>
<a name="320"></a> * <span class="doctag">@error</span>		Invalid function hook.
<a name="321"></a> */</span>
<a name="322"></a><span class="keyword">native</span> <span class="identifier">AddNormalSoundHook</span>(<span class="identifier">NormalSHook</span>:<span class="identifier">hook</span>);
<a name="323"></a>
<a name="324"></a><span class="comment">/**
<a name="325"></a> * Unhooks all played ambient sounds.
<a name="326"></a> *
<a name="327"></a> * <span class="doctag">@param</span> hook		Function used for the hook.
<a name="328"></a> * <span class="doctag">@noreturn</span>
<a name="329"></a> * <span class="doctag">@error</span>		Invalid function hook.
<a name="330"></a> */</span>
<a name="331"></a><span class="keyword">native</span> <span class="identifier">RemoveAmbientSoundHook</span>(<span class="identifier">AmbientSHook</span>:<span class="identifier">hook</span>);
<a name="332"></a>
<a name="333"></a><span class="comment">/**
<a name="334"></a> * Unhooks all played normal sounds.
<a name="335"></a> *
<a name="336"></a> * <span class="doctag">@param</span> hook		Function used for the hook.
<a name="337"></a> * <span class="doctag">@noreturn</span>
<a name="338"></a> * <span class="doctag">@error</span>		Invalid function hook.
<a name="339"></a> */</span>
<a name="340"></a><span class="keyword">native</span> <span class="identifier">RemoveNormalSoundHook</span>(<span class="identifier">NormalSHook</span>:<span class="identifier">hook</span>);
<a name="341"></a>				 
<a name="342"></a><span class="comment">/**
<a name="343"></a> * Wrapper to emit sound to one client.
<a name="344"></a> *
<a name="345"></a> * <span class="doctag">@param</span> client		Client index.
<a name="346"></a> * <span class="doctag">@param</span> sample		Sound file name relative to the "sounds" folder.
<a name="347"></a> * <span class="doctag">@param</span> entity		Entity to emit from.
<a name="348"></a> * <span class="doctag">@param</span> channel		Channel to emit with.
<a name="349"></a> * <span class="doctag">@param</span> level			Sound level.
<a name="350"></a> * <span class="doctag">@param</span> flags			Sound flags.
<a name="351"></a> * <span class="doctag">@param</span> volume		Sound volume.
<a name="352"></a> * <span class="doctag">@param</span> pitch			Sound pitch.
<a name="353"></a> * <span class="doctag">@param</span> speakerentity	Unknown.
<a name="354"></a> * <span class="doctag">@param</span> origin		Sound origin.
<a name="355"></a> * <span class="doctag">@param</span> dir			Sound direction.
<a name="356"></a> * <span class="doctag">@param</span> updatePos		Unknown (updates positions?)
<a name="357"></a> * <span class="doctag">@param</span> soundtime		Alternate time to play sound for.
<a name="358"></a> * <span class="doctag">@noreturn</span>
<a name="359"></a> * <span class="doctag">@error</span>				Invalid client index.
<a name="360"></a> */</span>
<a name="361"></a><span class="keyword">stock</span> <span class="identifier">EmitSoundToClient</span>(<span class="identifier">client</span>,
<a name="362"></a>				 <span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">sample</span>[],
<a name="363"></a>				 <span class="identifier">entity</span> = <span class="identifier">SOUND_FROM_PLAYER</span>,
<a name="364"></a>				 <span class="identifier">channel</span> = <span class="identifier">SNDCHAN_AUTO</span>,
<a name="365"></a>				 <span class="identifier">level</span> = <span class="identifier">SNDLEVEL_NORMAL</span>,
<a name="366"></a>				 <span class="identifier">flags</span> = <span class="identifier">SND_NOFLAGS</span>,
<a name="367"></a>				 <span class="keyword type">Float</span>:<span class="identifier">volume</span> = <span class="identifier">SNDVOL_NORMAL</span>,
<a name="368"></a>				 <span class="identifier">pitch</span> = <span class="identifier">SNDPITCH_NORMAL</span>,
<a name="369"></a>				 <span class="identifier">speakerentity</span> = -<span class="number">1</span>,
<a name="370"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">origin</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="371"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">dir</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="372"></a>				 <span class="keyword type">bool</span>:<span class="identifier">updatePos</span> = <span class="keyword literal">true</span>,
<a name="373"></a>				 <span class="keyword type">Float</span>:<span class="identifier">soundtime</span> = <span class="number">0.0</span>)
<a name="374"></a>{
<a name="375"></a>	<span class="keyword">new</span> <span class="identifier">clients</span>[<span class="number">1</span>];
<a name="376"></a>	<span class="identifier">clients</span>[<span class="number">0</span>] = <span class="identifier">client</span>;
<a name="377"></a>	<span class="comment">/* Save some work for SDKTools and remove SOUND_FROM_PLAYER references */</span>
<a name="378"></a>	<span class="identifier">entity</span> = (<span class="identifier">entity</span> == <span class="identifier">SOUND_FROM_PLAYER</span>) ? <span class="identifier">client</span> : <span class="identifier">entity</span>;
<a name="379"></a>	<span class="identifier">EmitSound</span>(<span class="identifier">clients</span>, <span class="number">1</span>, <span class="identifier">sample</span>, <span class="identifier">entity</span>, <span class="identifier">channel</span>, 
<a name="380"></a>		<span class="identifier">level</span>, <span class="identifier">flags</span>, <span class="identifier">volume</span>, <span class="identifier">pitch</span>, <span class="identifier">speakerentity</span>,
<a name="381"></a>		<span class="identifier">origin</span>, <span class="identifier">dir</span>, <span class="identifier">updatePos</span>, <span class="identifier">soundtime</span>);
<a name="382"></a>}
<a name="383"></a>
<a name="384"></a><span class="comment">/**
<a name="385"></a> * Wrapper to emit sound to all clients.
<a name="386"></a> *
<a name="387"></a> * <span class="doctag">@param</span> sample		Sound file name relative to the "sounds" folder.
<a name="388"></a> * <span class="doctag">@param</span> entity		Entity to emit from.
<a name="389"></a> * <span class="doctag">@param</span> channel		Channel to emit with.
<a name="390"></a> * <span class="doctag">@param</span> level			Sound level.
<a name="391"></a> * <span class="doctag">@param</span> flags			Sound flags.
<a name="392"></a> * <span class="doctag">@param</span> volume		Sound volume.
<a name="393"></a> * <span class="doctag">@param</span> pitch			Sound pitch.
<a name="394"></a> * <span class="doctag">@param</span> speakerentity	Unknown.
<a name="395"></a> * <span class="doctag">@param</span> origin		Sound origin.
<a name="396"></a> * <span class="doctag">@param</span> dir			Sound direction.
<a name="397"></a> * <span class="doctag">@param</span> updatePos		Unknown (updates positions?)
<a name="398"></a> * <span class="doctag">@param</span> soundtime		Alternate time to play sound for.
<a name="399"></a> * <span class="doctag">@noreturn</span>
<a name="400"></a> * <span class="doctag">@error</span>				Invalid client index.
<a name="401"></a> */</span>
<a name="402"></a><span class="keyword">stock</span> <span class="identifier">EmitSoundToAll</span>(<span class="keyword">const</span> <span class="keyword type">String</span>:<span class="identifier">sample</span>[],
<a name="403"></a>				 <span class="identifier">entity</span> = <span class="identifier">SOUND_FROM_PLAYER</span>,
<a name="404"></a>				 <span class="identifier">channel</span> = <span class="identifier">SNDCHAN_AUTO</span>,
<a name="405"></a>				 <span class="identifier">level</span> = <span class="identifier">SNDLEVEL_NORMAL</span>,
<a name="406"></a>				 <span class="identifier">flags</span> = <span class="identifier">SND_NOFLAGS</span>,
<a name="407"></a>				 <span class="keyword type">Float</span>:<span class="identifier">volume</span> = <span class="identifier">SNDVOL_NORMAL</span>,
<a name="408"></a>				 <span class="identifier">pitch</span> = <span class="identifier">SNDPITCH_NORMAL</span>,
<a name="409"></a>				 <span class="identifier">speakerentity</span> = -<span class="number">1</span>,
<a name="410"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">origin</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="411"></a>				 <span class="keyword">const</span> <span class="keyword type">Float</span>:<span class="identifier">dir</span>[<span class="number">3</span>] = <span class="keyword core">NULL_VECTOR</span>,
<a name="412"></a>				 <span class="keyword type">bool</span>:<span class="identifier">updatePos</span> = <span class="keyword literal">true</span>,
<a name="413"></a>				 <span class="keyword type">Float</span>:<span class="identifier">soundtime</span> = <span class="number">0.0</span>)
<a name="414"></a>{
<a name="415"></a>	<span class="keyword">new</span> <span class="identifier">clients</span>[<span class="identifier">MaxClients</span>];
<a name="416"></a>	<span class="keyword">new</span> <span class="identifier">total</span> = <span class="number">0</span>;
<a name="417"></a>	
<a name="418"></a>	<span class="keyword statement">for</span> (<span class="keyword">new</span> <span class="identifier">i</span>=<span class="number">1</span>; <span class="identifier">i</span>&lt;=<span class="identifier">MaxClients</span>; <span class="identifier">i</span>++)
<a name="419"></a>	{
<a name="420"></a>		<span class="keyword statement">if</span> (<span class="identifier">IsClientInGame</span>(<span class="identifier">i</span>))
<a name="421"></a>		{
<a name="422"></a>			<span class="identifier">clients</span>[<span class="identifier">total</span>++] = <span class="identifier">i</span>;
<a name="423"></a>		}
<a name="424"></a>	}
<a name="425"></a>	
<a name="426"></a>	<span class="keyword statement">if</span> (!<span class="identifier">total</span>)
<a name="427"></a>	{
<a name="428"></a>		<span class="keyword statement">return</span>;
<a name="429"></a>	}
<a name="430"></a>	
<a name="431"></a>	<span class="identifier">EmitSound</span>(<span class="identifier">clients</span>, <span class="identifier">total</span>, <span class="identifier">sample</span>, <span class="identifier">entity</span>, <span class="identifier">channel</span>, 
<a name="432"></a>		<span class="identifier">level</span>, <span class="identifier">flags</span>, <span class="identifier">volume</span>, <span class="identifier">pitch</span>, <span class="identifier">speakerentity</span>,
<a name="433"></a>		<span class="identifier">origin</span>, <span class="identifier">dir</span>, <span class="identifier">updatePos</span>, <span class="identifier">soundtime</span>);
<a name="434"></a>}
<a name="435"></a>
<a name="436"></a><span class="comment">/**
<a name="437"></a> * Converts an attenuation value to a sound level.  
<a name="438"></a> * This function is from the HL2SDK.
<a name="439"></a> *
<a name="440"></a> * <span class="doctag">@param</span> attn		Attenuation value.
<a name="441"></a> * <span class="doctag">@return</span>			Integer sound level.
<a name="442"></a> */</span>
<a name="443"></a><span class="keyword">stock</span> <span class="identifier">ATTN_TO_SNDLEVEL</span>(<span class="keyword type">Float</span>:<span class="identifier">attn</span>)
<a name="444"></a>{
<a name="445"></a>	<span class="keyword statement">if</span> (<span class="identifier">attn</span> &gt; <span class="number">0.0</span>)
<a name="446"></a>	{
<a name="447"></a>		<span class="keyword statement">return</span> <span class="identifier">RoundFloat</span>(<span class="number">50.0</span> + (<span class="number">20.0</span> / <span class="identifier">attn</span>));
<a name="448"></a>	}
<a name="449"></a>	<span class="keyword statement">return</span> <span class="number">0</span>;
<a name="450"></a>}
<!-- 96 empty lines to enable positioning at last anchor -->






























































































</pre>